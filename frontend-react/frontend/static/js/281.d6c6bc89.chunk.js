"use strict";(self.webpackChunkreact_auth_client=self.webpackChunkreact_auth_client||[]).push([[281],{257:(e,t,n)=>{n.d(t,{$n:()=>a,D0:()=>l,hS:()=>c,lV:()=>o,uU:()=>s});n(43);var r=n(579);function a(e){let{style:t,className:n,id:a,textContent:o="",disabled:l=!1,type:s="button",onClick:i=null}=e;return(0,r.jsx)("button",{disabled:l,style:t,className:n+" formtsx-default-button",id:a,type:s,onClick:i,children:o})}function o(e){let{style:t,className:n,id:a,children:o,formTitle:l,onSubmit:s=()=>{}}=e;return(0,r.jsxs)("form",{style:t,className:n+" formtsx-default-form",id:a,onSubmit:e=>{e.preventDefault(),s()},children:[(0,r.jsx)("legend",{children:l}),o]})}function l(e){let{style:t,className:n,id:a,label:o="",name:l="",note:s,placeholder:i,type:c="text",value:u,onChange:d}=e;return(0,r.jsxs)("label",{style:t,className:n+" formtsx-default-field",id:a,children:[" ",o,s?(0,r.jsxs)("span",{children:[" ",s]}):null,(0,r.jsx)("input",{placeholder:i,type:c,name:l,value:null!==u&&void 0!==u?u:"",onChange:e=>d(e)})]})}function s(e){let{style:t,className:n,id:a,label:o,name:l,note:s,fallbackPath:i,value:c,onChange:u}=e;return(0,r.jsxs)("label",{style:t,id:a,className:n+" formtsx-default-imagepicker",children:[o,(0,r.jsxs)("span",{children:[" ",s]}),c&&0!==c.size?(0,r.jsx)("svg",{onClick:e=>{e.preventDefault(),u(void 0)},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x-circle-fill",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})}):null,(0,r.jsx)("input",{name:l,type:"file",accept:".png, .jpeg, .jpg, .svg",onChange:e=>{e.target.files&&e.target.files.length>0&&u(e.target.files.item(0))}}),(0,r.jsx)("div",{children:c||i?(0,r.jsx)("img",{alt:"",src:c?URL.createObjectURL(c):i}):null})]})}var i=n(555);function c(e){let{style:t,className:n,id:a,children:o,wrap:l=!0,justify:s="center",align:c="center"}=e;return(0,r.jsx)("div",{className:n,id:a,style:(0,i.A)({display:"flex",alignItems:c,justifyContent:s,flexWrap:l?"wrap":"nowrap",width:"100%"},t),children:o})}},281:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(555),a=n(43),o=n(475),l=n(257);function s(e){return JSON.stringify({username:e.username.trim(),email:e.email.trim(),password:e.password.trim()})}var i=n(579);function c(){const[e,t]=(0,a.useState)(!1),[n,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(null),[p,f]=(0,a.useState)({username:"",email:"",password:"",passwordMatch:""});function m(e){f((0,r.A)((0,r.A)({},p),{},{[e.target.name]:e.target.value}))}return(0,i.jsxs)(l.lV,{formTitle:"Datos de la cuenta",onSubmit:async function(){const e={username:p.username,email:p.email,password:p.password};if(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{};return r(""),!!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(null===e||void 0===e?void 0:e.trim().length)>100?(t("El nombre no puede superar los 100 caracteres."),!1):0!==(null===e||void 0===e?void 0:e.trim().length)||(t("El nombre no puede estar vac\xedo."),!1)}(e.username,r)&&!!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)?!((null===e||void 0===e?void 0:e.length)>100)||(t("El correo electr\xf3nico no puede superar los 100 caracteres."),!1):(t("El correo electr\xf3nico no tiene un formato v\xe1lido."),!1)}(e.email,r)&&!!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(null===e||void 0===e?void 0:e.length)<5?(t("La contrase\xf1a debe tener al menos 5 caracteres."),!1):!(e.length>255)||(t("La contrase\xf1a no puede superar los 255 caracteres."),!1)}(e.password,r)&&(e.password!==t?(r("Las contrase\xf1as no coinciden"),!1):!!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return e&&"image"!==e.type.split("/")[0]?(t("El archivo ingresado no es una imagen."),!1):!((null===e||void 0===e?void 0:e.size)>2097152)||(t("La im\xe1gen no debe superar los 2MB"),!1)}(n,r))}(e,p.passwordMatch,u,c))try{t(!0);const n=await async function(e){const t=await fetch("http://localhost:81/api/users",{method:"POST",body:s(e),credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Error en el registro")}return t}(e);u&&await async function(e){const t=new FormData;t.append("profilePhoto",e);const n=await fetch("http://localhost:81/api/profile_photos",{method:"POST",body:t,credentials:"include"});if(!n.ok)throw new Error((await n.json()).message||"Error al subir la foto de perfil.");return n}(u),n.ok&&window.location.reload()}catch(n){c(n.message)}finally{t(!1)}},children:[(0,i.jsx)(l.D0,{name:"username",label:"\xbfC\xf3mo quieres que te identifiquemos?",value:p.username,onChange:m}),(0,i.jsx)(l.D0,{name:"email",label:"Tu direcci\xf3n de correo electr\xf3nico",value:p.email,onChange:m}),(0,i.jsxs)(l.hS,{justify:"left",children:[(0,i.jsx)(l.D0,{name:"password",label:"Elige una contrase\xf1a",value:p.password,onChange:m,type:"password"}),(0,i.jsx)(l.D0,{name:"passwordMatch",label:"Vuelve a escribir la contrase\xf1a",value:p.passwordMatch,onChange:m,type:"password"})]}),(0,i.jsx)(l.hS,{children:(0,i.jsx)(l.uU,{name:"profilePhoto",label:"Foto de perfil",note:"(opcional)",onChange:d,value:u})}),(0,i.jsx)("h3",{children:n}),(0,i.jsxs)(l.hS,{justify:"space-between",children:[(0,i.jsx)(o.N_,{to:"/ingresar",children:"\xbfYa tienes una cuenta?"}),(0,i.jsx)(l.$n,{textContent:"Crear cuenta",type:"submit",disabled:e})]})]})}},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{A:()=>s})}}]);
//# sourceMappingURL=281.d6c6bc89.chunk.js.map